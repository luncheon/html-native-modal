{const t=function(t){const e=document.createEvent("Event");e.initEvent("cancel",!1,!0),t.dispatchEvent(e)&&t.close()};if("undefined"==typeof HTMLDialogElement){const e=HTMLElement.prototype.showModal,n=HTMLElement.prototype.close,a=function(){if("closing"===this.getAttribute("data-modal")){document.body.removeAttribute("data-contains-modal");const t=this.nextElementSibling;t&&"DIALOG-BACKDROP"===t.tagName&&t.parentElement&&t.parentElement.removeChild(t),this.removeAttribute("data-modal"),this.removeAttribute("open")}};HTMLElement.prototype.showModal=function(){if("DIALOG"!==this.tagName)return e.apply(this,arguments);this.addEventListener("animationend",a),this.addEventListener("animationcancel",a),this.addEventListener("transitionend",a),this.hasAttribute("open")?this.setAttribute("data-modal",""):(this.setAttribute("open",""),this.setAttribute("data-modal",""),this.insertAdjacentElement("afterend",document.createElement("dialog-backdrop"))),document.body.setAttribute("data-contains-modal","")},HTMLElement.prototype.close=function(){if("DIALOG"!==this.tagName||!this.hasAttribute("data-modal"))return n.apply(this,arguments);this.setAttribute("data-modal","closing")},addEventListener("click",(function(e){if(0===e.button&&"DIALOG-BACKDROP"===e.target.tagName){const n=e.target.previousElementSibling;n&&"DIALOG"===n.tagName&&t(n)}}))}else{const e=HTMLDialogElement.prototype.showModal,n=HTMLDialogElement.prototype.close,a=function(){"closing"===this.getAttribute("data-modal")&&(document.body.removeAttribute("data-contains-modal"),this.removeAttribute("data-modal"),n.apply(this,arguments))};HTMLDialogElement.prototype.showModal=function(){this.addEventListener("animationend",a),this.addEventListener("animationcancel",a),this.addEventListener("transitionend",a),this.setAttribute("data-modal",""),n.call(this),document.body.setAttribute("data-contains-modal",""),e.apply(this,arguments)},HTMLDialogElement.prototype.close=function(){return this.hasAttribute("data-modal")?this.setAttribute("data-modal","closing"):n.apply(this,arguments)},addEventListener("click",(function(e){if(0===e.button&&"DIALOG"===e.target.tagName&&e.target.hasAttribute("data-modal")){const n=e.target.getBoundingClientRect();(e.clientX<n.left||n.right<e.clientX||e.clientY<n.top||n.bottom<e.clientY)&&t(e.target)}}))}addEventListener("keydown",(function(e){if(27===e.keyCode&&document.body.hasAttribute("data-contains-modal")){const n=document.querySelectorAll("[data-modal][open]");0!==n.length&&(e.preventDefault(),t(n[n.length-1]))}}))}